{
   "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
   "title": "COVID-19 Active Cases (10 Oct 2020)",
   "width": 800,
   "height": 400,
  "params": [
  
   {
   "name": "Year_selection",
   "value":2018,
   "bind":{
   "input": "range",
  "min": 2018,
  "max": 2022,
  "step": 1,
   "name": "Year:"


   }
 }
  
  ],
  
   "projection": {"type": "equalEarth"},
   
  
  
   "data": {
  "url": "https://raw.githubusercontent.com/JiazhouLiu/FIT3179/main/VegaLite/3_choropleth_map/js/ne_110m_admin_0_countries.topojson",
   "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
   },
  
  
  
  
  
   "transform": [

 
   {
    "lookup": "properties.NAME",
  
   
  "from": {
   "data": {
  "url": "happinessScrapped.csv"
 },
   "key": "country",
   "fields": ["happiness_score"]
   }
   
 
  }


],
 
  
  
  
  
 "mark": {"type": "geoshape"},
  
  "encoding": {

  
 "color": {

 "field": "happiness_score",
 "type": "quantitative",
"scale": {"type": "log"},
  "legend":{"format":".2s"}
  

 },



 "tooltip": [
  {"field": "properties.NAME", "type": "nominal", "title": "Country"},
 {"field": "happiness_score", "type": "quantitative"},
 {"field": "year", "type": "quantitative","title":"Year"}
  
  ]
  },
  "config": {}
}